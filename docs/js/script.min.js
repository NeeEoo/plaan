"use strict";!function(){document.getElementById("main");var t=document.getElementById("plan"),l=(document.getElementById("settings"),document.querySelector("[download]")),e=document.querySelector('[type="file"]'),n=document.querySelector('[type="reset"]');document.addEventListener("DOMContentLoaded",function(){main.style.setProperty("--rows",4),main.style.setProperty("--cols",7),localStorage.length&&(l.href="data:text/json,"+JSON.stringify(localStorage)),t.querySelectorAll("[style]").forEach(function(c){var r=c.textContent,o=new Event("change",{bubbles:!0}),t=c.style.getPropertyValue("--x"),e=c.style.getPropertyValue("--y"),n=function(t,e,n){var a=t.toLowerCase().replace(" ","-"),o='\n      <div class="table">\n        <button type="button" class="arrows"\n                data-controls="'.concat(a,'">\n          <span class="sr-only">Utilisez les flèches pour déplacer l’élément</span>\n        </button>\n        <h2>').concat(t,'</h2>\n        <button type="button" data-controls="').concat(a,'-y" data-step="down"\n                class="↑" aria-label="Monter" tabindex="-1">\n          <span>↑</span>\n        </button>\n        <button type="button" data-controls="').concat(a,'-y" data-step="up"\n                class="↓" aria-label="Descendre" tabindex="-1">\n          <span>↓</span>\n        </button>\n        <button type="button" data-controls="').concat(a,'-x" data-step="up"\n                class="→" aria-label="Décaler à droite" tabindex="-1">\n          <span>→</span>\n        </button>\n        <button type="button" data-controls="').concat(a,'-x" data-step="down"\n                class="←" aria-label="Décaler à gauche" tabindex="-1">\n          <span>←</span>\n        </button>\n      </div>\n      <form class="sr-only">\n        <p>\n          <label for="').concat(a,'-y">Ligne</label>\n          <input type="number" step="1" min="1" max="').concat(4,'" value="').concat(n,'"\n                 tabindex="-1" data-key="').concat(a,'" id="').concat(a,'-y"/>\n        </p>\n        <p>\n          <label for="').concat(a,'-x">Colonne</label>\n          <input type="number" step="1" min="1" max="').concat(7,'" value="').concat(e,'"\n                tabindex="-1" data-key="').concat(a,'" id="').concat(a,'-x"/>\n        </p>\n      </form>');return document.createRange().createContextualFragment(o)}(r,t,e);c.innerHTML="",c.append(n),c.querySelectorAll('[type="number"]').forEach(function(t){var n=t.dataset.key,a=4===Number(t.getAttribute("max"))?"y":"x",e=localStorage.getItem(n),o={name:r};null!==e&&void 0!==(o=JSON.parse(e))[a]&&(c.style.setProperty("--".concat(a),o[a]),t.value=o[a]),t.addEventListener("change",function(t){var e=t.target.value;o[a]=e,c.style.setProperty("--".concat(a),e),localStorage.setItem(n,JSON.stringify(o)),l.href="data:text/json,"+JSON.stringify(localStorage)},!1)}),c.querySelectorAll("[data-step]").forEach(function(t){var e=t.dataset.controls,n=t.dataset.step,a=document.getElementById(e);t.addEventListener("click",function(){switch(n){case"up":a.stepUp(),a.dispatchEvent(o);break;case"down":a.stepDown(),a.dispatchEvent(o)}},!1)}),c.querySelectorAll(".arrows").forEach(function(t){var e=t.dataset.controls,n=document.getElementById("".concat(e,"-y")),a=document.getElementById("".concat(e,"-x"));t.addEventListener("keydown",function(t){switch(t.key){case"ArrowLeft":a.stepDown(),a.dispatchEvent(o);break;case"ArrowUp":n.stepDown(),n.dispatchEvent(o);break;case"ArrowRight":a.stepUp(),a.dispatchEvent(o);break;case"ArrowDown":n.stepUp(),n.dispatchEvent(o)}},!1)})})}),e.addEventListener("change",function(t){var e=t.target.files[0],n=new FileReader;n.onload=function(t){JSON.parse(t.target.result,function(t,e){localStorage.removeItem(t);var n=JSON.parse(e),a=document.querySelector('[data-controls="'.concat(t,'"]')),o=document.getElementById("".concat(t,"-y")),c=document.getElementById("".concat(t,"-x")),r=a.closest("li");void 0!==n.y&&(r.style.setProperty("--y",n.y),o.value=n.y),void 0!==n.x&&(r.style.setProperty("--x",n.x),c.value=n.x),localStorage.setItem(t,e)})},n.readAsText(e)}),n.addEventListener("click",function(){localStorage.clear()})}();