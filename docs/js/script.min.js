"use strict";!function(){var c=document.getElementById("main").style.getPropertyValue("--rows"),e=document.getElementById("plan"),l=(document.getElementById("settings"),document.querySelector("[download]")),t=document.querySelector('[type="file"]'),n=document.querySelector('[type="reset"]');document.addEventListener("DOMContentLoaded",function(){localStorage.length&&(l.href="data:text/json,"+JSON.stringify(localStorage))}),e.querySelectorAll('[type="number"]').forEach(function(e){var n=e.closest("li"),a=e.dataset.key,o=function(e){return e.getAttribute("max")===c?"y":"x"}(e),t=localStorage.getItem(a),r={name:n.querySelector("h2").textContent};null!==t&&void 0!==(r=JSON.parse(t))[o]&&(n.style.setProperty("--".concat(o),r[o]),e.value=r[o]),e.addEventListener("change",function(e){var t=e.target.value;r[o]=t,n.style.setProperty("--".concat(o),t),localStorage.setItem(a,JSON.stringify(r)),l.href="data:text/json,"+JSON.stringify(localStorage)},!1)}),e.querySelectorAll("[data-step]").forEach(function(e){var t=e.dataset.controls,n=e.dataset.step,a=document.getElementById(t),o=new Event("change",{bubbles:!0});e.addEventListener("click",function(){switch(n){case"up":a.stepUp(),a.dispatchEvent(o);break;case"down":a.stepDown(),a.dispatchEvent(o)}},!1)}),e.querySelectorAll(".arrows").forEach(function(e){var t=e.dataset.controls,n=new Event("change",{bubbles:!0}),a=document.getElementById("".concat(t,"-y")),o=document.getElementById("".concat(t,"-x"));e.addEventListener("keydown",function(e){switch(e.key){case"ArrowLeft":o.stepDown(),o.dispatchEvent(n);break;case"ArrowUp":a.stepDown(),a.dispatchEvent(n);break;case"ArrowRight":o.stepUp(),o.dispatchEvent(n);break;case"ArrowDown":a.stepUp(),a.dispatchEvent(n)}},!1)}),t.addEventListener("change",function(e){var t=e.target.files[0],n=new FileReader;n.onload=function(e){JSON.parse(e.target.result,function(e,t){var n=JSON.parse(t);if(localStorage.removeItem(e),""!==e){var a=document.querySelector('[data-controls="'.concat(e,'"]')),o=document.getElementById("".concat(e,"-y")),r=document.getElementById("".concat(e,"-x")),c=a.closest("li");void 0!==n.y&&(c.style.setProperty("--y",n.y),o.value=n.y),void 0!==n.x&&(c.style.setProperty("--x",n.x),r.value=n.x)}localStorage.setItem(e,t)})},n.readAsText(t)}),n.addEventListener("click",function(){localStorage.clear()})}();