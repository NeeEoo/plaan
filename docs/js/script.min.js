"use strict";!function(){var c=document.getElementById("main").style.getPropertyValue("--rows"),e=document.getElementById("plan"),l=(document.getElementById("settings"),document.querySelector("[download]")),t=document.querySelector('[type="file"]'),n=document.querySelector('[type="reset"]');document.addEventListener("DOMContentLoaded",function(){localStorage.length&&(l.href="data:text/json,"+JSON.stringify(localStorage))}),e.querySelectorAll('[type="number"]').forEach(function(e){var n=e.closest("li"),o=e.dataset.key,a=function(e){return e.getAttribute("max")===c?"y":"x"}(e),t=localStorage.getItem(o),r={name:n.querySelector("h2").textContent};null!==t&&void 0!==(r=JSON.parse(t))[a]&&(n.style.setProperty("--".concat(a),r[a]),e.value=r[a]),e.addEventListener("change",function(e){var t=e.target.value;r[a]=t,n.style.setProperty("--".concat(a),t),localStorage.setItem(o,JSON.stringify(r)),l.href="data:text/json,"+JSON.stringify(localStorage)},!1)}),e.querySelectorAll("[data-step]").forEach(function(e){var t=e.dataset.controls,n=e.dataset.step,o=document.getElementById(t),a=new Event("change",{bubbles:!0});e.addEventListener("click",function(){switch(n){case"up":o.stepUp(),o.dispatchEvent(a);break;case"down":o.stepDown(),o.dispatchEvent(a)}},!1)}),e.querySelectorAll(".arrows").forEach(function(e){var t=e.dataset.controls,n=new Event("change",{bubbles:!0}),o=document.getElementById("".concat(t,"-y")),a=document.getElementById("".concat(t,"-x"));e.addEventListener("keydown",function(e){switch(e.key){case"ArrowLeft":a.stepDown(),a.dispatchEvent(n);break;case"ArrowUp":o.stepDown(),o.dispatchEvent(n);break;case"ArrowRight":a.stepUp(),a.dispatchEvent(n);break;case"ArrowDown":o.stepUp(),o.dispatchEvent(n)}},!1)}),t.addEventListener("change",function(e){var t=e.target.files[0],n=new FileReader;n.onload=function(e){JSON.parse(e.target.result,function(e,t){localStorage.removeItem(e);var n=JSON.parse(t),o=document.querySelector('[data-controls="'.concat(e,'"]')),a=document.getElementById("".concat(e,"-y")),r=document.getElementById("".concat(e,"-x")),c=o.closest("li");void 0!==n.y&&(c.style.setProperty("--y",n.y),a.value=n.y),void 0!==n.x&&(c.style.setProperty("--x",n.x),r.value=n.x),localStorage.setItem(e,t)})},n.readAsText(t)}),n.addEventListener("click",function(){localStorage.clear()})}();