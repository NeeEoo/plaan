<!DOCTYPE html>
<html lang="fr" class="no-js">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        {% block meta %}
          <title>plaan</title>
          <meta property="og:url" content="https://ffoodd.github.io/plaan/">
          <meta property="og:title" content="plaan">
          <meta property="og:type" content="article">
          <meta property="og:description"
                name="description" content="Plan de salle éditable basé sur des astuces HTML / CSS / JS">
          <meta name="twitter:card" content="summary">
        {% endblock %}
        <script>
          document.documentElement.classList.remove('no-js');
          document.documentElement.classList.add('js');
        </script>
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
        <link rel="stylesheet" href="css/styles.min.css" media="all">
        <link rel="stylesheet" href="css/print.min.css" media="print">
    </head>
    <body itemscope itemtype="http://schema.org/WebPage">
      <main role="main" id="main" tabindex="-1" itemprop="mainContentOfPage" style="--rows:{{ grid.rows }}; --cols:{{ grid.cols }};">
        <h1 class="sr-only">Plan de salle du «&nbsp;Cercle des poètes disparus&nbsp;»</h1>
        {% block main %}
          {% set cells = grid.rows * grid.cols %}
          <ul class="no-list no-margin" id="shadow">
            {% for cell in range(3, cells) %}
              <li role="presentation"></li>
            {% endfor %}
          </ul>
          <ul class="no-list no-margin" id="plan">
            {% for label, character in casting %}
              {% set style = '--y:' ~ character.y ~ '; --x:' ~ character.x ~ ';' %}
              {% if character.span != undefined %}
                {% set span = '--span: ' ~ character.span %}
              {% else %}
                {% set span = '' %}
              {% endif %}
              <li style="{{ style }}{{ span }}">
                <div class="table">
                  <button type="button" class="arrows"
                          data-controls="{{ label }}">
                    <span class="sr-only">Utilisez les flèches pour déplacer l’élément</span>
                  </button>
                  <h2>{{ character.name }}</h2>
                  <button type="button"
                          class="↑" aria-label="Monter" tabindex="-1"
                          data-controls="{{ label }}-y"
                          data-step="down">
                    <span>↑</span>
                  </button>
                  <button type="button"
                          class="↓" aria-label="Descendre" tabindex="-1"
                          data-controls="{{ label }}-y"
                          data-step="up">
                    <span>↓</span>
                  </button>
                  <button type="button"
                          class="→" aria-label="Décaler à droite" tabindex="-1"
                          data-controls="{{ label }}-x"
                          data-step="up">
                    <span>→</span>
                  </button>
                  <button type="button"
                          class="←" aria-label="Décaler à gauche" tabindex="-1"
                          data-controls="{{ label }}-x"
                          data-step="down">
                    <span>←</span>
                  </button>
                </div>
                <form class="sr-only">
                  <p>
                    <label for="{{ label }}-y">Ligne</label>
                    <input type="number" step="1" min="1" max="{{ grid.rows }}"
                           value="{{ character.y }}" tabindex="-1"
                           data-key="{{ label }}" id="{{ label }}-y"/>
                  </p>
                  <p>
                    <label for="{{ label }}-x">Colonne</label>
                    <input type="number" step="1" min="1" max="{{ grid.cols }}"
                           value="{{ character.x }}" tabindex="-1"
                           data-key="{{ label }}" id="{{ label }}-x"/>
                  </p>
                </form>
              </li>
            {% endfor %}
          </ul>
        {% endblock %}
      </main>

      <aside role="complementary" id="settings" class="no-padding">
        <button type="button" class="no-margin">
          <span aria-hidden="true">&#9881;</span>&nbsp;Réglages
        </button>
        <form>
          <div class="grid-2">
            <a download="plaan.json">Exporter</a>
            <p class="mt-0">
              <label for="import">Importer</label>
              <input id="import" name="import" type="file" accept="json" class="sr-only"/>
            </p>
          </div>
          <input id="reset" name="reset" type="reset" value="Annuler les modifications"/>
        </form>
      </aside>

      {% block scripts %}
        <script src="js/script.min.js"></script>
      {% endblock %}
    </body>
</html>
